sumeru.config({httpServerPort:8080,sumeruPath:"/../sumeru"}),sumeru.router.add({pattern:"/itworks",action:"App.itworks"}),App.itworks=sumeru.controller.create(function(e,t){e.onrender=function(e){e("itworks",["push","left"])}}),sumeru.router.add({pattern:"/undercover",action:"App.undercover"}),sumeru.router.setDefault("App.undercover"),App.undercover=sumeru.controller.create(function(e,t){e.onrender=function(e){e("undercover",["push","left"])},e.onready=function(){document.getElementById("start_undercover").addEventListener("click",n)};var n=function(){e.redirect("/undercover_setting")}}),sumeru.router.add({pattern:"/undercover_setting",action:"App.undercover_setting"}),App.undercover_setting=sumeru.controller.create(function(e,t){e.onrender=function(e){e("undercover_setting",["push","left"])},e.onready=function(){$("#alter").hide(),document.getElementById("start_game").addEventListener("click",a),document.getElementById("addfather").addEventListener("click",n),document.getElementById("costfather").addEventListener("click",r),document.getElementById("addson").addEventListener("click",i),document.getElementById("costson").addEventListener("click",o)};var n=function(){$("#alter").hide();var e=parseInt($("#father_count").val());return $("#alter").hide(),e>=12?($("#alter").html("参与人数过多（4-12）"),$("#alter").show(),void 0):(e+=1,$("#father_count").val(e),void 0)},r=function(){$("#alter").hide();var e=parseInt($("#father_count").val());return $("#alter").hide(),4>=e?($("#alter").html("参与人数过少（4-12）"),$("#alter").show(),void 0):(e-=1,$("#father_count").val(e),void 0)},i=function(){$("#alter").hide();var e=parseInt($("#son_count").val());return e>=3?($("#alter").html("卧底人数过多（1-3）"),$("#alter").show(),void 0):(e+=1,$("#son_count").val(e),void 0)},o=function(){$("#alter").hide();var e=parseInt($("#son_count").val());return $("#alter").hide(),1>=e?($("#alter").html("卧底人数过少（1-3）"),$("#alter").show(),void 0):(e-=1,$("#son_count").val(e),void 0)},a=function(){var t=parseInt($("#father_count").val()),n=parseInt($("#son_count").val());e.redirect("/fanpai",{fathercount:t,soncount:n})}}),sumeru.router.add({pattern:"/fanpai",action:"App.fanpai"}),App.fanpai=sumeru.controller.create(function(e,t){e.onrender=function(e){e("fanpai",["push","left"])};var n=[],r=4,i=1,o=1,a=!0;e.onready=function(){r=t.get("fathercount"),i=t.get("soncount"),n=u(r,i),console.log("restart"),document.getElementById("nextbtn").addEventListener("click",s),$("#wanbin").hide()};var s=function(){o>r?($("#wanbin").hide(),e.redirect("/guess")):$("#wanbin").show(),a?($("#wanbin").html(o),console.log("showit"+o)):($("#wanbin").html(n[o-1]),console.log("showit"+n[o-1]),o++),a=!a},u=function(e,t){for(var n=["台灯_电灯","玫瑰_月季","若曦_晴川","孟非_乐嘉","牛奶_豆浆","保安_保镖","白菜_生菜","辣椒_芥末","金庸_古龙","赵敏_黄蓉","海豚_海狮"],r=n[parseInt(Math.random()*n.length)],i=r.split("_"),o=parseInt(Math.random()),a=Math.abs(o-1),s=new Array(10),u=e-1;u>=0;u--)s[u]=i[o];for(var u=t-1;u>=0;u--){for(var l=parseInt(Math.random()*e);s[l]==i[a];)l=parseInt(Math.random()*e);s[l]=i[a]}for(var u=e-1;u>=0;u--)console.log(s[u]+u);return s}}),sumeru.router.add({pattern:"/guess",action:"App.guess"}),App.guess=sumeru.controller.create(function(e,t){e.onrender=function(e){e("guess",["push","left"])}});